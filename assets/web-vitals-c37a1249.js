var s,l,C,g,c=function(e,n){return{name:e,value:n===void 0?-1:0,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},y=function(e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(r){return r.getEntries().map(n)});return i.observe({type:e,buffered:!0}),i}}catch{}},w=!1,h=function(e,n){w||typeof InstallTrigger<"u"||(addEventListener("beforeunload",function(){}),w=!0),addEventListener("visibilitychange",function i(r){document.visibilityState==="hidden"&&(e(r),n&&removeEventListener("visibilitychange",i,!0))},!0)},S=function(e){addEventListener("pageshow",function(n){n.persisted&&e(n)},!0)},m=new WeakSet,f=function(e,n,i){var r;return function(){n.value>=0&&(i||m.has(n)||document.visibilityState==="hidden")&&(n.delta=n.value-(r||0),(n.delta||r===void 0)&&(r=n.value,e(n)))}},q=function(e,n){var i,r=c("CLS",0),t=function(a){a.hadRecentInput||(r.value+=a.value,r.entries.push(a),i())},o=y("layout-shift",t);o&&(i=f(e,r,n),h(function(){o.takeRecords().map(t),i()}),S(function(){r=c("CLS",0),i=f(e,r,n)}))},p=-1,E=function(){return document.visibilityState==="hidden"?0:1/0},b=function(){h(function(e){var n=e.timeStamp;p=n},!0)},L=function(){return p<0&&(p=E(),b(),S(function(){setTimeout(function(){p=E(),b()},0)})),{get timeStamp(){return p}}},A=function(e,n){var i,r=L(),t=c("FCP"),o=y("paint",function(a){a.name==="first-contentful-paint"&&(o&&o.disconnect(),a.startTime<r.timeStamp&&(t.value=a.startTime,t.entries.push(a),m.add(t),i()))});o&&(i=f(e,t,n),S(function(a){t=c("FCP"),i=f(e,t,n),requestAnimationFrame(function(){requestAnimationFrame(function(){t.value=performance.now()-a.timeStamp,m.add(t),i()})})}))},v={passive:!0,capture:!0},D=new Date,F=function(e,n){s||(s=n,l=e,C=new Date,k(removeEventListener),P())},P=function(){if(l>=0&&l<C-D){var e={entryType:"first-input",name:s.type,target:s.target,cancelable:s.cancelable,startTime:s.timeStamp,processingStart:s.timeStamp+l};g.map(function(n){n(e)}),g=[]}},I=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(i,r){var t=function(){F(i,r),a()},o=function(){a()},a=function(){removeEventListener("pointerup",t,v),removeEventListener("pointercancel",o,v)};addEventListener("pointerup",t,v),addEventListener("pointercancel",o,v)}(n,e):F(n,e)}},k=function(e){["mousedown","keydown","touchstart","pointerdown"].map(function(n){return e(n,I,v)})},R=function(e,n){var i,r=L(),t=c("FID"),o=function(u){u.startTime<r.timeStamp&&(t.value=u.processingStart-u.startTime,t.entries.push(u),m.add(t),i())},a=y("first-input",o);i=f(e,t,n),a&&h(function(){a.takeRecords().map(o),a.disconnect()},!0),a&&S(function(){var u;t=c("FID"),i=f(e,t,n),g=[],l=-1,s=null,k(addEventListener),u=o,g.push(u),P()})},B=function(e,n){var i,r=L(),t=c("LCP"),o=function(d){var T=d.startTime;T<r.timeStamp&&(t.value=T,t.entries.push(d)),i()},a=y("largest-contentful-paint",o);if(a){i=f(e,t,n);var u=function(){m.has(t)||(a.takeRecords().map(o),a.disconnect(),m.add(t),i())};["keydown","click"].map(function(d){addEventListener(d,u,{once:!0,capture:!0})}),h(u,!0),S(function(d){t=c("LCP"),i=f(e,t,n),requestAnimationFrame(function(){requestAnimationFrame(function(){t.value=performance.now()-d.timeStamp,m.add(t),i()})})})}},M=function(e){var n,i=c("TTFB");n=function(){try{var r=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,o={entryType:"navigation",startTime:0};for(var a in t)a!=="navigationStart"&&a!=="toJSON"&&(o[a]=Math.max(t[a]-t.navigationStart,0));return o}();i.value=i.delta=r.responseStart,i.entries=[r],e(i)}catch{}},document.readyState==="complete"?setTimeout(n,0):addEventListener("pageshow",n)};export{q as getCLS,A as getFCP,R as getFID,B as getLCP,M as getTTFB};
